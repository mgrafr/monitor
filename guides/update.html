

<!DOCTYPE html>
<html class="writer-html5" lang="fr">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>19. UPDATE &mdash; Monitor</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=536c50fe" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=d44bf9f9" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=e59be10d"></script>
      <script src="../_static/doctools.js?v=888ff710"></script>
      <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
      <script src="../_static/translations.js?v=d99ca74e"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="20. Résolution de problèmes" href="resolution_problemes.html" />
    <link rel="prev" title="18. Divers" href="divers.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            monitor-domotique
              <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Rechercher docs" aria-label="Rechercher docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">SOMMAIRE</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="bien_debuter.html">0. Infos pour bien débuter</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration_minimum.html">1. Configuration minimum : la page d’accueil</a></li>
<li class="toctree-l1"><a class="reference internal" href="plan_interieur.html">2. Une 1ere PAGE : LE PLAN INTERIEUR</a></li>
<li class="toctree-l1"><a class="reference internal" href="meteo.html">3. Météo</a></li>
<li class="toctree-l1"><a class="reference internal" href="plan_exterieur.html">4. La page du plan extérieur</a></li>
<li class="toctree-l1"><a class="reference internal" href="alarme.html">5. L’ALARME</a></li>
<li class="toctree-l1"><a class="reference internal" href="graphiques.html">6. GRAHIQUES &amp; BASE DE DONNEES</a></li>
<li class="toctree-l1"><a class="reference internal" href="mur_cameras.html">7. MUR de CAMERAS</a></li>
<li class="toctree-l1"><a class="reference internal" href="mur_de_commandes.html">8. MUR de COMMANDES</a></li>
<li class="toctree-l1"><a class="reference internal" href="zigbee.html">9. Dispositifs Zigbee</a></li>
<li class="toctree-l1"><a class="reference internal" href="zwave.html">10. Dispositifs Zwave</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitoring.html">11. MONITORING Nagios</a></li>
<li class="toctree-l1"><a class="reference internal" href="app_diverses.html">12. - FICHIERS LOG Domoticz, Nagios, SQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="app_externes.html">13. APPLICATIONS externes en lien avec Domoticz, HA ou monitor</a></li>
<li class="toctree-l1"><a class="reference internal" href="administration.html">14.  ADMINISTRATION</a></li>
<li class="toctree-l1"><a class="reference internal" href="exemples.html">15. EXEMPLES</a></li>
<li class="toctree-l1"><a class="reference internal" href="ajout_page_alertes.html">16. Ajouter des pages ou des alertes</a></li>
<li class="toctree-l1"><a class="reference internal" href="diy.html">17. DIY</a></li>
<li class="toctree-l1"><a class="reference internal" href="divers.html">18. Divers</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">19. UPDATE</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#version-de-php">19.1 Version de PHP</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-de-ssh">19.2 Version de SSH</a></li>
<li class="toctree-l2"><a class="reference internal" href="#version-de-mariadb">19.3 Version de MariaDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="#update-monitor">19.4 UPDATE Monitor</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#releases">19.4.1 Releases</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#version-en-developpement-3-2-1">Version  en developpement 3.2.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#version-3-2-0-aout-2024">Version 3.2.0 (Août 2024)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#version-3-1-0-mars-2024">Version  3.1.0 (mars 2024)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#version-3-0">Version  3.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="#version-2-2-7">Version 2.2.7</a></li>
<li class="toctree-l4"><a class="reference internal" href="#version-2-2-6">Version  2.2.6</a></li>
<li class="toctree-l4"><a class="reference internal" href="#version-2-2-5">Version  2.2.5</a></li>
<li class="toctree-l4"><a class="reference internal" href="#version-2-2-4">Version 2.2.4</a></li>
<li class="toctree-l4"><a class="reference internal" href="#version-2-2-3">Version 2.2.3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#version-2-2-0">Version 2.2.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="#version-2-1-0">Version 2.1.0</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#version-de-jpgraph">19.5 Version de JPGRAPH</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="resolution_problemes.html">20. Résolution de problèmes</a></li>
<li class="toctree-l1"><a class="reference internal" href="mon_installation.html">21. – Mon installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="optimisations.html">22. OPTIMISATION en cours</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">monitor-domotique</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">19. UPDATE</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/guides/update.rst.txt" rel="nofollow"> Afficher la source de la page</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="update">
<h1>19. UPDATE<a class="headerlink" href="#update" title="Lien permanent vers cette rubrique"></a></h1>
<section id="version-de-php">
<h2>19.1 Version de PHP<a class="headerlink" href="#version-de-php" title="Lien permanent vers cette rubrique"></a></h2>
<p><em>La version actuelle est 8.3</em></p>
</section>
<section id="version-de-ssh">
<h2>19.2 Version de SSH<a class="headerlink" href="#version-de-ssh" title="Lien permanent vers cette rubrique"></a></h2>
<p>version : php8.3-ssh2 pour Debian 12</p>
</section>
<section id="version-de-mariadb">
<h2>19.3 Version de MariaDB<a class="headerlink" href="#version-de-mariadb" title="Lien permanent vers cette rubrique"></a></h2>
<p>Server version: 10.11.6</p>
</section>
<section id="update-monitor">
<h2>19.4 UPDATE Monitor<a class="headerlink" href="#update-monitor" title="Lien permanent vers cette rubrique"></a></h2>
<p><strong>La version stable actuelle est 3.2.0</strong></p>
<section id="releases">
<h3>19.4.1 Releases<a class="headerlink" href="#releases" title="Lien permanent vers cette rubrique"></a></h3>
<section id="version-en-developpement-3-2-1">
<h4>Version  en developpement 3.2.1<a class="headerlink" href="#version-en-developpement-3-2-1" title="Lien permanent vers cette rubrique"></a></h4>
</section>
<section id="version-3-2-0-aout-2024">
<h4>Version 3.2.0 (Août 2024)<a class="headerlink" href="#version-3-2-0-aout-2024" title="Lien permanent vers cette rubrique"></a></h4>
<ul class="simple">
<li><p>ajout Panic Bouton en page d’accueil</p></li>
<li><p>prise en compte de io.broker (début du développement)</p></li>
<li><p>Changement de couleur des lampes sur le mur de commandes</p></li>
</ul>
<p>cette version commence à intégrer io.broker ; pour cela l” idm de monitor doit indiquer :
1 ou 2 pour Domoticz (à terme seulement 2 sera utilisé, le 1 est conservé uniquement pour Domoticz provisoirement compte tenu de l’historique)
3 pour Home Assistant
4 pour io.broker</p>
<p>cette version ne peut être mise à jour automatiquemnt, aussi la configuration doit être indiquée dans le nouveau fichier en s’inspirant du précédent.
Dans la base de données de monitor seul le champ Actif doit être si besoin mis à jour en tenant compte des infos ci-dessus.</p>
</section>
<section id="version-3-1-0-mars-2024">
<h4>Version  3.1.0 (mars 2024)<a class="headerlink" href="#version-3-1-0-mars-2024" title="Lien permanent vers cette rubrique"></a></h4>
<ul class="simple">
<li><p>modification ou mise à jour des dispositifs sans utiliser PhpMyAdmin</p></li>
<li><p>le fichier string_modect.lua (DZ) est remplacé par string_modect.json (compatible DZ et HA)</p></li>
<li><p>version SSH : php8.3-ssh2 pour Debian 12</p></li>
<li><p>avec la compatibilité pour Home Assistant, les fichier de configuration « connect.* sont stockés dans monitor et à chaque maj DZ et HA téléchargent , après notification, les nouveaux fichiers.</p></li>
<li><p>utilisation d’un identifiant monitor “idm” pour les dispositifs et les variables pour une compatibilité avec Home Assistant</p></li>
</ul>
</section>
<section id="version-3-0">
<h4>Version  3.0<a class="headerlink" href="#version-3-0" title="Lien permanent vers cette rubrique"></a></h4>
<ul class="simple">
<li><p>maj_js (fonction des dispositifs) s’enrichit de « on » poussoir momentané (bouton sonnette)</p></li>
<li><p>test GSM de l’alarme: bouton PUSH ON remplacé par bouton de sonnette</p></li>
<li><p>correction bug sur mise a jour lampes plan intérieur</p></li>
<li><p>mise à jour de jpgraph vers la version 4.4.2</p></li>
<li><dl class="simple">
<dt>pour une utilisation combinée de Domoticz et Home Assistant la table “idm” n’est plus facultative mais obligatoire,(ne concerne que Domoticz); une copie de la table “idx” vers “idm” résout rapidement le problème</dt><dd><p>dans la base de données idx de Domoticz et Id de Home Assistant peuvent être déclarés, il suffit d’indiquer celui des deux qui doit être actif pour monitor</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="version-2-2-7">
<h4>Version 2.2.7<a class="headerlink" href="#version-2-2-7" title="Lien permanent vers cette rubrique"></a></h4>
<ul class="simple">
<li><p>séparation de temp et data pour l’affichage des températures</p></li>
<li><p>Mise à jour temps réel avec SSE Node.js depuis Domoticz ou Home Assistant</p></li>
<li><p>Alternative MAJ temps réel avec SSE PHP, installé lors de l’install de monitor</p></li>
<li><p>ajout des groupes et scènes sur la page “commandes ON/OFF »</p></li>
<li><p>nom_objet remplace nom_dz ,(nom pour DZ et object_id pour HA)</p></li>
<li><p>affichage clavier numérique dans alarme en plus d’administration</p></li>
<li><p>PHP 8.3</p></li>
<li><p>PhpMyAdmin : 5.2.1</p></li>
<li><p>Python 3.11</p></li>
</ul>
</section>
<section id="version-2-2-6">
<h4>Version  2.2.6<a class="headerlink" href="#version-2-2-6" title="Lien permanent vers cette rubrique"></a></h4>
<ul class="simple">
<li><p>ajout tableau messages, pour variables HA &gt; 255 caractères ou autres appli</p></li>
<li><p>ajout API monitor</p></li>
</ul>
</section>
<section id="version-2-2-5">
<h4>Version  2.2.5<a class="headerlink" href="#version-2-2-5" title="Lien permanent vers cette rubrique"></a></h4>
<ul class="simple">
<li><p>ajout script « lasteen pour home assistant</p></li>
</ul>
</section>
<section id="version-2-2-4">
<h4>Version 2.2.4<a class="headerlink" href="#version-2-2-4" title="Lien permanent vers cette rubrique"></a></h4>
<ul class="simple">
<li><p>ajout d’une notification LastSeen (avec script pour domoticz)</p></li>
<li><p>ajout bouton reset pour annuler la notification de piles faibles</p></li>
<li><p>réécriture de export_sql en dzvent : export_timer_sql et export_dev_sql(concerne Linky et les températures</p></li>
<li><p>Nb enregistrements affichés pour historique poubelles : remplacé 24 par choix dans config.php</p></li>
<li><p>installation d’un assistant vocal Ha-bridge et Alexa ; intégration du pont Ha-bridge dans monitor</p></li>
</ul>
</section>
<section id="version-2-2-3">
<h4>Version 2.2.3<a class="headerlink" href="#version-2-2-3" title="Lien permanent vers cette rubrique"></a></h4>
<ul class="simple">
<li><p>Ajout docomentation Readthedocs</p></li>
</ul>
</section>
<section id="version-2-2-0">
<h4>Version 2.2.0<a class="headerlink" href="#version-2-2-0" title="Lien permanent vers cette rubrique"></a></h4>
<ul class="simple">
<li><p>suite à la modification de l’API Domoticz (devices remplacé par getdevices),   ……………………..mise à jour de fonctions.php</p></li>
<li><p>accès shell Domoticz-Docker avec SSH2</p></li>
</ul>
</section>
<section id="version-2-1-0">
<h4>Version 2.1.0<a class="headerlink" href="#version-2-1-0" title="Lien permanent vers cette rubrique"></a></h4>
<ul class="simple">
<li><p>début de l’adaptabilité à Home Assistant, l’affichages des valeurs des dispositifs, l’utilisation des variables et la commande de switches virtuels sont opérationnelles.</p></li>
<li><p>ajout certificat auto-signé pour Nginx</p></li>
<li><p>ajout reboot serveur distant et scp pour fichiers distants</p></li>
<li><p>maj automatique des IP lors de changements de serveurs</p></li>
<li><p>scripts automatiques d’installation</p></li>
<li><p>3 scripts différents d’installation et version 2.1 (update vers Debian 12)</p></li>
<li><p>explication concernant l’envoi par Domoticz de SMS</p></li>
</ul>
</section>
</section>
</section>
<section id="version-de-jpgraph">
<h2>19.5 Version de JPGRAPH<a class="headerlink" href="#version-de-jpgraph" title="Lien permanent vers cette rubrique"></a></h2>
<p><em>La version actuelle est 4.4.2</em></p>
<p>Recommendé:</p>
<ul class="simple">
<li><p>&gt;= PHP 5.2.0</p></li>
<li><p>PHP Builtin GD library</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pied de page">
        <a href="divers.html" class="btn btn-neutral float-left" title="18. Divers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Précédent</a>
        <a href="resolution_problemes.html" class="btn btn-neutral float-right" title="20. Résolution de problèmes" accesskey="n" rel="next">Suivant <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Droits d'auteur 2024, Gravier.</p>
  </div>

  Compilé avec <a href="https://www.sphinx-doc.org/">Sphinx</a> en utilisant un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">thème</a>
    fourni par <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>